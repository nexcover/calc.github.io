<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no;" />
    <title>간단한 계산기</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="main.js"></script>
</head>

<body>
    <div class="container">
        <div class="calcBox">
            <textarea id="inputArea" disabled></textarea>
            <textarea id="outputArea" disabled></textarea>
        </div>

        <div class="buttonBox">
            <table>
                <tr>
                    <td colspan="1">
                        <button class="etcButton" onclick="allClear()">C</button>
                    </td>
                    <td colspan="1">
                        <button class="etcButton" onclick="calculate('(')">(</button>
                    </td>
                    <td colspan="1">
                        <button class="etcButton" onclick="calculate(')')">)</button>
                    </td>
                    <td colspan="1">
                        <button class="etcButton" onclick="calculate('%')">％</button>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button onclick="num1('7')">7</button>
                    </td>
                    <td>
                        <button onclick="num1('8')">8</button>
                    </td>
                    <td>
                        <button onclick="num1('9')">9</button>
                    </td>
                    <td>
                        <button class="sign" onclick="calculate('/')">÷</button>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button onclick="num1('4')">4</button>
                    </td>
                    <td>
                        <button onclick="num1('5')">5</button>
                    </td>
                    <td>
                        <button onclick="num1('6')">6</button>
                    </td>
                    <td>
                        <button class="sign" onclick="calculate('*')">×</button>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button onclick="num1('1')">1</button>
                    </td>
                    <td>
                        <button onclick="num1('2')">2</button>
                    </td>
                    <td>
                        <button onclick="num1('3')">3</button>
                    </td>
                    <td>
                        <button class="sign" onclick="calculate('-')">−</button>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button onclick="num1('0')">0</button>
                    </td>
                    <td>
                        <button onclick="dot('.')">.</button>
                    </td>
                    <td>
                        <button onclick="del()" style="font-size: 20px;">del</button>
                    </td>
                    <td>
                        <button class="sign" onclick="calculate('+')">+</button>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <script>
        let input = "";
        let output = document.getElementById("outputArea");

        function num1(num) {
            if (input.length < 100000000) {
                input += num;
                document.getElementById("inputArea").value = input;
                updateOutput();
            }
        }

        function dot() {
            if (!input.includes('.') && input.length < 100000000) {
                input += '.';
                document.getElementById("inputArea").value = input;
                updateOutput();
            }
        }

        function calculate(operator) {
            if (operator === '%') {
                if (!isNaN(input)) {
                    input = parseFloat(input) * 100;
                    document.getElementById("inputArea").value = input;
                    updateOutput();
                } else {
                    input += operator;
                    document.getElementById("inputArea").value = input;
                    updateOutput();
                }
            } else {
                input += operator;
                document.getElementById("inputArea").value = input;
                updateOutput();
            }
        }

        function equal() {
            try {
                let result = eval(input);
                output.textContent = numberWithCommas(result);
                input = result.toString();
            } catch (error) {
                output.textContent = "Error";
            }
        }

        function allClear() {
            input = "";
            document.getElementById("inputArea").value = "";
            updateOutput();
        }

        function del() {
            input = input.slice(0, -1);
            document.getElementById("inputArea").value = input;
            updateOutput();
        }

        function updateOutput() {
            try {
                let result = eval(input);
                output.textContent = numberWithCommas(result);
            } catch (error) {
                output.textContent = "Error";
            }

            if (input === "") {
                output.textContent = "0";
            }
        }

        function numberWithCommas(x) {
            return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        document.getElementById("inputArea").addEventListener("input", function () {
            input = document.getElementById("inputArea").value;
            updateOutput();
        });
    </script>
</body>

</html>