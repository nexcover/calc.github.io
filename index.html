<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no;" />
    <title>계산기</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div class="calculator">
            <div>
                <textarea id="expression" disabled oninput="scrollToBottom()"></textarea>
                <textarea id="result" disabled></textarea>
            </div>
            <table>
                <tr>
                    <td colspan="1">
                        <button id="clear" onclick="clearResult()">
                            <p>C</p>
                        </button>
                    </td>
                    <td colspan="1">
                        <button id="openParentheses" onclick="num('(')">
                            <p>(</p>
                        </button>
                    </td>
                    <td colspan="1">
                        <button id="closeParentheses" onclick="num(')')">
                            <p>)</p>
                        </button>
                    </td>
                    <td colspan="1">
                        <button id="divide" onclick="calc('/')">
                            <p>÷</p>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button id="num7" onclick="num('7')">
                            <p>7</p>
                        </button>
                    </td>
                    <td>
                        <button id="num8" onclick="num('8')">
                            <p>8</p>
                        </button>
                    </td>
                    <td>
                        <button id="num9" onclick="num('9')">
                            <p>9</p>
                        </button>
                    </td>
                    <td>
                        <button id="multiply" onclick="calc('*')">
                            <p>×</p>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button id="num4" onclick="num('4')">
                            <p>4</p>
                        </button>
                    </td>
                    <td>
                        <button id="num5" onclick="num('5')">
                            <p>5</p>
                        </button>
                    </td>
                    <td>
                        <button id="num6" onclick="num('6')">
                            <p>6</p>
                        </button>
                    </td>
                    <td>
                        <button id="subtract" onclick="calc('-')">
                            <p>−</p>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button id="num1" onclick="num('1')">
                            <p>1</p>
                        </button>
                    </td>
                    <td>
                        <button id="num2" onclick="num('2')">
                            <p>2</p>
                        </button>
                    </td>
                    <td>
                        <button id="num3" onclick="num('3')">
                            <p>3</p>
                        </button>
                    </td>
                    <td>
                        <button id="add" onclick="calc('+')">
                            <p>+</p>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button id="num0" onclick="num('0')">
                            <p>0</p>
                        </button>
                    </td>
                    <td>
                        <button id="dot" onclick="num('.')">
                            <p>.</p>
                        </button>
                    </td>
                    <td>
                        <button id="delete" onclick="deleteLast()">
                            <p>D</p>
                        </button>
                    </td>
                    <td>
                        <button id="equal" onclick="calculate()">
                            <p>=</p>
                        </button>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <script>
        let expression = "";
        let resultDiv = document.getElementById("result");
        let expressionTextarea = document.getElementById("expression");

        function num(num) {
            expression += num;
            expressionTextarea.value = expression;
            scrollToBottom();
        }

        function calc(operator) {
            expression += operator;
            expressionTextarea.value = expression;
            scrollToBottom();
        }

        function clearResult() {
            expression = "";
            expressionTextarea.value = expression;
            scrollToBottom();
            resultDiv.innerText = "";
        }

        function deleteLast() {
            expression = expression.slice(0, -1);
            expressionTextarea.value = expression;
            scrollToBottom();
        }

        function calculate() {
            try {
                let result = eval(expression);
                if (typeof result !== "number" || isNaN(result) || !isFinite(result) || result >= 1e9) {
                    resultDiv.innerText = "Invalid expression or too large number";
                } else {
                    resultDiv.innerText = result.toLocaleString();
                }
            } catch (error) {
                resultDiv.innerText = "Error";
            }
        }

        function scrollToBottom() {
            expressionTextarea.scrollTop = expressionTextarea.scrollHeight;
        }

    </script>
</body>

</html>